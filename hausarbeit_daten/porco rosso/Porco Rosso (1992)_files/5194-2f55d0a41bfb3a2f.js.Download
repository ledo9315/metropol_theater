"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5194],{45194:function(e,t,r){r.d(t,{Z:function(){return ed}});var a,n,s=r(52322),o=r(2784),i=r(4283),d=r(85767),l=r(83128),c=r(51250);let u="ad-oo",f={getConsentFromCookie(e,t){let r=(0,c.rZ)(u,t?.headers);if(void 0!==r)return!(parseInt(r)&e)},setConsentToCookie(e,t,r){let a=(0,c.rZ)(u,r),n=0;if(void 0!==a&&(("number"==typeof a||"string"==typeof a)&&(n=parseInt(a)),n&t&&!e||!(n&t)&&e))return;e||(n|=t);let s=new Date;s.setHours(s.getHours()+36),(0,c.Ys)(u,n.toString(),s,"shared")}};var w=r(78056),p=r(73787),h=r(98537),v=r.n(h);let m={init:()=>{try{window?.imdb_ad_debug||(window.imdb_ad_debug=m)}catch{}},override:e=>{try{m.init(),v()(m,e)}catch{}},adRefresh:{isPaused:!1,pause:()=>{m.override({adRefresh:{isPaused:!0}})},resume:()=>{m.override({adRefresh:{isPaused:!1}})}},auction:{default:()=>{window.ad_utils?.apsAuctionManager?.forceDefaultRender()},preferAaxAds:()=>{window.ad_utils?.apsAuctionManager?.forceAaxRender()},prefer3pAds:()=>{window.ad_utils?.apsAuctionManager?.forceApsRender()},view3pAdAuditLog:()=>{window.ad_utils?.apsAuctionManager?.viewAuditLog()}}};var g=r(83827),_=r(66617);let y=function(){let e=A("zo");if(e)try{return S(e)}catch(e){console.error(e)}return""},A=function(e){if((0,_.$K)(document)){let t=document.cookie.match("(^|[^;]+)\\s*"+e+"\\s*=\\s*([^;]+)");return t&&t.length>0?t[t.length-1]:""}return""},S=function(e){return(0,_.$K)(window)&&"function"==typeof decodeURIComponent?window.atob(decodeURIComponent(e)):""};var E=r(87010),R=r(33775);let b={isReady:!1,hasSetInterval:!1},I=e=>{e.adRefreshInfo&&(e.adRefreshInfo.slotsToRefresh=e.adRefreshInfo.slotsToRefresh.filter(e=>P(e)),M(e.adRefreshInfo)&&(document.addEventListener("visibilitychange",k),b.isReady=!0,window.setInterval(O,1e3*e.adRefreshInfo.intervalInSeconds,e),b.hasSetInterval=!0,m.override({adRefresh:{tryRefresh:()=>{O(e,!0)}}})))},k=()=>{"visible"===document.visibilityState?(b.isReady=!0,b.postResponseCallback=void 0):b.postResponseCallback=()=>{b.isReady=!1}},M=e=>!y()&&!!(!b.hasSetInterval&&e.isEnabled&&e.intervalInSeconds&&e.slotsToRefresh.length),P=e=>L(e)&&(0,_.Gr)(e)&&!N(e)&&!C(e),L=e=>!!window?.AdSlots?.[e],C=e=>{let t=window.ad_utils?.get_slot_iframe(e);return!!t?.hasAttribute("data-first-party-creative-template")},N=e=>window.AdSlots?.[e]?.creativeMetadata?.adProductType?.grade===p.rP.PREMIUM,O=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m.adRefresh?.isPaused&&!t||!b.isReady||(0,E.rm)()||T(e).then(b.postResponseCallback)},T=e=>{let t=e.clientSideUrl||"",r=e.apsSlotInfoMap||{},a=Object.keys(e.slotSizeMap||{}).filter(t=>e.adRefreshInfo?.slotsToRefresh?.includes(t)).map(t=>({[t]:(e.slotSizeMap||{})[t]})).reduce(j,{});a=D(a);let n=e=>{0===Object.keys(r).length&&(e.slotsMap=x(e.slotsMap))},s=Object.keys(a).join(",");if(!(Object.keys(r).length>0))return(0,g._J)(t,s,a,0,{},void 0,n);{let e=R.k.getPreviousWindowWidth(),o=(0,w.QH)(s,a,e);return(0,g._J)(t,s,a,0,{},void 0,n,r,o)}},D=e=>Object.keys(e||{}).map(t=>({[t+"_refresh"]:(e||{})[t]})).reduce(j,{}),x=e=>Object.keys(e||{}).filter(t=>!(0,E.M2)((e||{})[t])).map(t=>({[t]:(e||{})[t]})).reduce(j,{}),j=(e,t)=>({...e,...t});var W=r(30124),F=r(54073),$=r.n(F),U=r(45455),z=r.n(U),J=r(12859),q=r(62298);let B=(e,t)=>{window?.mediaOrchestrator?.publish(e,t)},Y=e=>{let t=e?.slots;return t&&t[J.A.SIS_PIXEL]?.slotMarkup},K=(e,t)=>{let r=e.match(/el\.src="(.*)";/),a=r?r[1]:void 0;return a||t.error("Failed to retrieve SIS Pixel URL"),a},V=async(e,t)=>{try{return await fetch(e,{method:"GET",credentials:"include"}),!0}catch(e){t.error("Error fetching SIS Pixel",e)}};var X=r(48574);let H=(0,r(16189).createLogger)()("util_sisPixel_rws");(a=n||(n={})).GRANTED="granted",a.PROMPT="prompt",a.DENIED="denied";let Z=new Set().add("fake_treatment_1.1").add("fake_treatment_1.2").add("fake_treatment_1.3").add("fake_control_2"),G=["mousedown","scroll","keydown"],Q="https://amazon-adsystem.com",ee=async()=>{let e="cookieDeprecationLabel"in navigator,t="requestStorageAccessFor"in document;if(!e||!t)return H.log("Browser not compatible with Related Website Sets",{hasCookieDeprecationLabel:e,hasRequestStorageAccessFor:t}),!1;try{let e=await navigator.cookieDeprecationLabel.getValue();return H.log(`Received cookieDeprecationLabel: ${e}`),Z.has(e)}catch(e){return H.error("Issue fetching cookieDeprecationLabel",e),!1}},et=async()=>{let e=await ea();switch(H.log(`Received storageAccessPermissionStatus: ${e}`),e){case"granted":return en();case"prompt":return er()}H.log(`'top-level-storage-access' permissions for ${Q}: denied`)},er=async()=>{let e;if(!navigator.userActivation)return;let t=new Promise(t=>{e=e=>t(e)}),r=async()=>{navigator.userActivation.isActive&&(G.forEach(e=>{document.removeEventListener(e,r)}),await en(),e(!0))};return G.forEach(e=>{document.addEventListener(e,r)}),t},ea=async()=>{try{return(await navigator.permissions.query({name:"top-level-storage-access",requestedOrigin:Q})).state}catch(e){H.error("Error querying Storage Access permissions",e);return}},en=async()=>{if("requestStorageAccessFor"in document)try{return await document.requestStorageAccessFor(Q),!0}catch(e){H.error("Error requesting storage access",e)}},es=o.memo(e=>{let{sisSlotMarkup:t}=e,[r,a]=(0,o.useState)(!1),n=(0,X.wL)("util_sisSlotMarkup");return(0,o.useEffect)(()=>{(async()=>{if(!await ee())return a(!0);await et();let e=K(t,n);e&&await V(e,n)})()},[]),r?(0,s.jsx)("div",{ref:_.SK.bind(null,t)}):null});var eo=r(59393);let ei=e=>{let{adSlotsInfo:t}=e;(0,q.WJ)();let r=()=>{(0,E.rm)()||(0,g.cU)(t).finally(()=>R.k.setPreviousWindowWidth())},{slotsEnabled:a,clientSideUrlBase:n,atfSlots:i,slotSizeMap:d,apsSlotInfoMap:l}=(0,q.OF)(t);o.useEffect(()=>{let e,s;if(a&&!z()(d)&&(R.k.setPreviousWindowWidth(),e=$()(r,750),window.addEventListener("resize",e),t?.adRefreshInfo?.isEnabled&&("complete"===document.readyState?I(t):window.addEventListener("load",()=>I(t)))),!a||!n||!i.includes(J.A.INLINE20)){let e={type:eo.X.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE,slotName:J.A.INLINE20,timestamp:Date.now()},t={type:eo.X.EMPTY,slotName:"",timestamp:Date.now()};B(W.x.MEDIA_PLAYBACK_EVENT_NAME,e),B(W.x.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME,t)}return()=>{e&&window.removeEventListener("resize",e),s&&window.removeEventListener("load",s)}},[]);let c=(0,q.Bf)(a,n,i,d,l),u=Y(t);return(0,s.jsxs)(s.Fragment,{children:[u?(0,s.jsx)(es,{sisSlotMarkup:u}):null,(0,s.jsx)("script",{async:!0,dangerouslySetInnerHTML:{__html:c}})]})};function ed(){let e=(0,d.B)(),{adSlotsInfo:t}=(0,l.Ok)();return e?.context?.sidecar?.ads?.adsCcbaConsent!==void 0&&f.setConsentToCookie(e.context.sidecar?.ads?.adsCcbaConsent,16,e.context?.headers),(0,s.jsx)(i.Z,{name:"IMDbNextAdPageData",children:(0,s.jsx)(ei,{adSlotsInfo:t})})}},62298:function(e,t,r){r.d(t,{Bf:function(){return s},OF:function(){return o},WJ:function(){return n},Wd:function(){return i}});var a=r(73787);let n=()=>{void 0===window.hasAdAJAXCallFired&&(window.hasAdAJAXCallFired=!1)},s=(e,t,r,a,n)=>`
        if (window && window.ad_utils && window.ad_utils.makeAtfSlotsCall) {
            window.ad_utils.makeAtfSlotsCall(
                ${e},
                '${t}',
                '${r}',
                ${JSON.stringify(a)},
                ${n?JSON.stringify(n):"{}"});
    }`,o=e=>({slotsEnabled:!e||e.slotsEnabled,clientSideUrlBase:e?e.clientSideUrl:"",atfSlots:e&&e.slots?Object.keys(e.slots).join(","):"",slotSizeMap:e?e.slotSizeMap:{},apsSlotInfoMap:e&&e.apsSlotInfoMap||{}}),i=e=>!e||e?.creativeMetadata?.creativeWidth===0||e?.creativeMetadata?.adProductType?.name===a.A7.BLANK}}]);